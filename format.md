# Decision Format Specification

Decisions are the single source of truth. Everything else compiles from them.

One node type: **decisions** — choices with reasoning, assumptions, tradeoffs, and optional detail.

---

## Two Directories

- **Constitution** (`constitution/`) — Behavioral governance: what agents need made explicit. Operating principles, containment models, escalation patterns. Portable across projects.
- **Decisions** (`decisions/`) — Project-specific decisions about what to build and how.

**Iron rule across directories:** Constitution is always upstream. A project decision can depend on a constitution decision. Never the reverse.

**Node IDs:** Both directories use `DEC-NNN`. IDs must be globally unique. Convention: constitution uses 100+, project uses 001-099.

---

## Frontmatter

```yaml
---
id: DEC-NNN
title: Short descriptive title
date: YYYY-MM-DD
level: 1 | 2 | 3 | 4
state: suggested | committed | superseded
stakes: high | medium | low
depends_on:
  - DEC-NNN
---
```

### Field Notes

- **`level`** — Position in the decision hierarchy. Numeric enables mechanical iron rule enforcement. See 4-Level Hierarchy below.
- **`state`** — 3-state machine: `suggested` (proposed, awaiting commitment), `committed` (locked, creates constraints on lower levels), `superseded` (replaced by a newer decision).
- **`stakes`** — Optional. Consequence of being wrong: `high` (broad cascade, safety, foundational), `medium` (scoped impact, recoverable), `low` (cosmetic or easily reversed). Human judgment. Informs agent contract enforcement weight.
- **`depends_on`** — Simple list of DEC IDs. The only edge type. The model reasons about dependency nature when needed.

### State Transitions

```
suggested   → committed    (human review approves)
suggested   → superseded   (replaced before commitment)
committed   → superseded   (replaced by a newer decision)
```

---

## Body Sections

```markdown
## Decision
What was decided. Concrete, specific, unambiguous.

## Reasoning
Why this was decided. Told as a story: what prompted it, what was
considered, why this path over alternatives. Merges old Context,
Rationale, Alternatives, and Deliberation into one natural narrative.

## Assumptions
What must remain true for this decision to hold. Powers cascade —
when an assumption breaks, dependents need review.

## Tradeoffs
What was knowingly given up. Costs accepted. Risks acknowledged.

## Detail
(Optional) Specifications, schemas, examples, evidence, walkthroughs.
Anything that grounds the decision in concrete reality.
```

**Section rules:**
- Decision, Reasoning, Assumptions, Tradeoffs — **required**.
- Detail — **optional**. Use when the decision involves schemas, specs, inventories, worked examples, or any concrete artifact that grounds it.

---

## 4-Level Decision Hierarchy

| Level | Name | What It Contains |
|-------|------|------------------|
| 1 | **Identity** | Purpose, principles, values, who we are |
| 2 | **Direction** | Outcomes, scope, success criteria, boundaries |
| 3 | **Strategy** | Approach, structure, patterns, architecture |
| 4 | **Tactics** | Specifics, parameters, implementations |

**The iron rule, numerically:** A level N decision must be within the possibility space defined by committed decisions at levels 1 through N-1. The `depends_on` edges should not point to higher level numbers (warning, not error — feedback loops exist but are rare).

---

## Compilation Targets

Two contracts compiled from decisions:

**Human contract** (`contracts/human.md`) — organized by level, narrative prose. What people agree on.

**Agent contract** (`contracts/agent.md`) — structured for agent consumption. Constitution + project decisions compiled for autonomy boundaries.

Meta-tooling publishes but does not consume contracts. They are output, not input.

---

## What Lives Outside Decisions

- **HEALTH.md** — System health summary, regenerated by dna-graph.
- **contracts/** — Compiled output. The human and agent views.
